use crate::frequencies::calculate_frequencies;
use crate::kbm_file::KbmFile;
use crate::scl_file::SclFile;
use anyhow::Result;

pub(crate) fn experimental() -> Result<()> {
    let scl_file = SclFile::read("resources/weird.scl")?;
    let kbm_file = KbmFile::read("resources/weird.kbm")?;

    let scale = scl_file.scale();
    let keyboard_mapping = kbm_file.keyboard_mapping();

    let frequencies = calculate_frequencies(scale, keyboard_mapping);
    for (i, f) in frequencies.iter().enumerate() {
        println!("{i:>3}: {f} Hz,");
    }

    /*
    println!("const EXPECTED_FREQUENCIES: [f64; 128] = [");
    for f in frequencies {
        println!("  {f}f64,");
    }
    println!("];");
    */

    Ok(())
}

/*
   0: 12.500000     C -1:-5265.004 cents
   1: 13.071677     C#-1:-5187.585 cents
   2: 13.978586     D -1:-5071.456 cents
   3: 14.948416     D#-1:-4955.327 cents
   4: 15.632069     E -1:-4877.907 cents
   5: 16.716617     F -1:-4761.778 cents
   6: 17.481137     F#-1:-4684.359 cents
   7: 18.693974     G -1:-4568.230 cents
   8: 19.548926     G#-1:-4490.811 cents
   9: 20.905225     A -1:-4374.682 cents
  10: 22.355623     A#-1:-4258.553 cents
  11: 23.378039     B -1:-4181.133 cents
  12: 25.000000     C 0:-4065.004 cents
  13: 26.143354     C#0:-3987.585 cents
  14: 27.957172     D 0:-3871.456 cents
  15: 29.896832     D#0:-3755.327 cents
  16: 31.264138     E 0:-3677.907 cents
  17: 33.433234     F 0:-3561.778 cents
  18: 34.962275     F#0:-3484.359 cents
  19: 37.387947     G 0:-3368.230 cents
  20: 39.097853     G#0:-3290.811 cents
  21: 41.810450     A 0:-3174.682 cents
  22: 44.711247     A#0:-3058.553 cents
  23: 46.756077     B 0:-2981.133 cents
  24: 50.000000     C 1:-2865.004 cents
  25: 52.286707     C#1:-2787.585 cents
  26: 55.914343     D 1:-2671.456 cents
  27: 59.793664     D#1:-2555.327 cents
  28: 62.528276     E 1:-2477.907 cents
  29: 66.866469     F 1:-2361.778 cents
  30: 69.924550     F#1:-2284.359 cents
  31: 74.775894     G 1:-2168.230 cents
  32: 78.195706     G#1:-2090.811 cents
  33: 83.620900     A 1:-1974.682 cents
  34: 89.422493     A#1:-1858.553 cents
  35: 93.512155     B 1:-1781.133 cents
  36: 100.000000    C 2:-1665.004 cents
  37: 104.573415    C#2:-1587.585 cents
  38: 111.828687    D 2:-1471.456 cents
  39: 119.587327    D#2:-1355.327 cents
  40: 125.056552    E 2:-1277.907 cents
  41: 133.732938    F 2:-1161.778 cents
  42: 139.849100    F#2:-1084.359 cents
  43: 149.551788    G 2:-968.230 cents
  44: 156.391412    G#2:-890.811 cents
  45: 167.241801    A 2:-774.682 cents
  46: 178.844987    A#2:-658.553 cents
  47: 187.024310    B 2:-581.133 cents
  48: 200.000000    C 3:-465.004 cents
  49: 209.146830    C#3:-387.585 cents
  50: 223.657374    D 3:-271.456 cents
  51: 239.174655    D#3:-155.327 cents
  52: 250.113104    E 3:-77.907 cents
  53: 267.465876    F 3: 38.222 cents
  54: 279.698200    F#3: 115.641 cents
  55: 299.103576    G 3: 231.770 cents
  56: 312.782824    G#3: 309.189 cents
  57: 334.483602    A 3: 425.318 cents
  58: 357.689973    A#3: 541.447 cents
  59: 374.048620    B 3: 618.867 cents
  60: 400.000000    C 4: 734.996 cents
  61: 418.293659    C#4: 812.415 cents
  62: 447.314747    D 4: 928.544 cents
  63: 478.349310    D#4: 1044.673 cents
  64: 500.226208    E 4: 1122.093 cents
  65: 534.931751    F 4: 1238.222 cents
  66: 559.396399    F#4: 1315.641 cents
  67: 598.207153    G 4: 1431.770 cents
  68: 625.565648    G#4: 1509.189 cents
  69: 668.967204    A 4: 1625.318 cents
  70: 715.379947    A#4: 1741.447 cents
  71: 748.097239    B 4: 1818.867 cents
  72: 800.000000    C 5: 1934.996 cents
  73: 836.587319    C#5: 2012.415 cents
  74: 894.629495    D 5: 2128.544 cents
  75: 956.698619    D#5: 2244.673 cents
  76: 1000.452416   E 5: 2322.093 cents
  77: 1069.863503   F 5: 2438.222 cents
  78: 1118.792799   F#5: 2515.641 cents
  79: 1196.414306   G 5: 2631.770 cents
  80: 1251.131295   G#5: 2709.189 cents
  81: 1337.934407   A 5: 2825.318 cents
  82: 1430.759893   A#5: 2941.447 cents
  83: 1496.194478   B 5: 3018.867 cents
  84: 1600.000000   C 6: 3134.996 cents
  85: 1673.174637   C#6: 3212.415 cents
  86: 1789.258989   D 6: 3328.544 cents
  87: 1913.397238   D#6: 3444.673 cents
  88: 2000.904831   E 6: 3522.093 cents
  89: 2139.727005   F 6: 3638.222 cents
  90: 2237.585597   F#6: 3715.641 cents
  91: 2392.828612   G 6: 3831.770 cents
  92: 2502.262590   G#6: 3909.189 cents
  93: 2675.868814   A 6: 4025.318 cents
  94: 2861.519786   A#6: 4141.447 cents
  95: 2992.388956   B 6: 4218.867 cents
  96: 3200.000000   C 7: 4334.996 cents
  97: 3346.349274   C#7: 4412.415 cents
  98: 3578.517978   D 7: 4528.544 cents
  99: 3826.794477   D#7: 4644.673 cents
 100: 4001.809663   E 7: 4722.093 cents
 101: 4279.454011   F 7: 4838.222 cents
 102: 4475.171195   F#7: 4915.641 cents
 103: 4785.657224   G 7: 5031.770 cents
 104: 5004.525180   G#7: 5109.189 cents
 105: 5351.737629   A 7: 5225.318 cents
 106: 5723.039572   A#7: 5341.447 cents
 107: 5984.777912   B 7: 5418.867 cents
 108: 6400.000000   C 8: 5534.996 cents
 109: 6692.698549   C#8: 5612.415 cents
 110: 7157.035957   D 8: 5728.544 cents
 111: 7653.588954   D#8: 5844.673 cents
 112: 8003.619326   E 8: 5922.093 cents
 113: 8558.908022   F 8: 6038.222 cents
 114: 8950.342390   F#8: 6115.641 cents
 115: 9571.314447   G 8: 6231.770 cents
 116: 10009.050361  G#8: 6309.189 cents
 117: 10703.475258  A 8: 6425.318 cents
 118: 11446.079145  A#8: 6541.447 cents
 119: 11969.555825  B 8: 6618.867 cents
 120: 12800.000000  C 9: 6734.996 cents
 121: 13385.397097  C#9: 6812.415 cents
 122: 14314.071913  D 9: 6928.544 cents
 123: 15307.177908  D#9: 7044.673 cents
 124: 16007.238651  E 9: 7122.093 cents
 125: 17117.816044  F 9: 7238.222 cents
 126: 17900.684780  F#9: 7315.641 cents
 127: 19142.628894  G 9: 7431.770 cents
*/
